<div class="sidebar" [class.collapsed]="isCollapsed">
  <!-- Header Section -->
  <div class="sidebar-header p-3 border-bottom">
    <div class="d-flex justify-content-between align-items-center">
      <h5 class="m-0" *ngIf="!isCollapsed">Dragoneye Design Wiki</h5>
      <button class="btn btn-outline-secondary btn-sm d-md-none" (click)="toggleSidebar()">
        <i class="bi bi-list" *ngIf="isCollapsed"></i>
        <i class="bi bi-x" *ngIf="!isCollapsed"></i>
      </button>
    </div>
    
    <!-- Search Section -->
    <div class="mt-3" *ngIf="!isCollapsed">
      <div class="input-group input-group-sm">
        <input type="text" 
               class="form-control" 
               placeholder="Search pages..."
               [(ngModel)]="searchTerm"
               (keyup.enter)="onSearch()">
        <button class="btn btn-outline-secondary" type="button" (click)="onSearch()">
          <i class="bi bi-search"></i>
        </button>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="mt-3 d-flex gap-2" *ngIf="!isCollapsed">
      <button class="btn btn-primary btn-sm flex-fill" (click)="onNewPage()">
        <i class="bi bi-plus"></i> New Page
      </button>
      <button class="btn btn-secondary btn-sm flex-fill" (click)="onRecentChanges()">
        <i class="bi bi-clock-history"></i> Recent
      </button>
    </div>
  </div>

  <!-- Navigation Section -->
  <div class="sidebar-nav" *ngIf="!isCollapsed">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="text-center p-3">
      <div class="spinner-border spinner-border-sm" role="status">
        <span class="visually-hidden">Loading navigation...</span>
      </div>
      <p class="mt-2 small">Loading navigation...</p>
    </div>

    <!-- Navigation Content -->
    <div class="nav-sections" *ngIf="!isLoading">
      <div class="nav-section" *ngFor="let section of navigationItems; let i = index">
        <div class="nav-section-header" 
             [attr.data-bs-toggle]="'collapse'"
             [attr.data-bs-target]="'#section' + i"
             role="button"
             aria-expanded="true">
          <span class="me-2">{{ section.icon }}</span>
          <strong>{{ section.title }}</strong>
          <i class="bi bi-chevron-down ms-auto"></i>
        </div>
        <div [id]="'section' + i" class="nav-section-content collapse show">
          <ul class="list-unstyled mb-0">
            <li *ngFor="let child of section.children">
              <a [routerLink]="child.route" 
                 class="nav-link sidebar-link px-3 py-2 d-block text-decoration-none"
                 routerLinkActive="active">
                {{ child.title }}
              </a>
            </li>
          </ul>
        </div>
      </div>
      
      <!-- Empty State -->
      <div *ngIf="navigationItems.length === 0" class="text-center p-3">
        <p class="text-muted">No navigation available</p>
      </div>
    </div>
  </div>

  <!-- Collapsed state toggle -->
  <div class="text-center py-2" *ngIf="isCollapsed">
    <button class="btn btn-link" (click)="toggleSidebar()">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</div>
